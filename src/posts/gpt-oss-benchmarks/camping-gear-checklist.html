<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Camping Gear Checklist</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Outdoor‑themed Google fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <!-- Font Awesome for trash icon -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-5K+GzCzZK5J9wJXc6Bz2cB8ZQh7E0c3M6X3M8X8JwQn+z+2c6Vw3QJ0Yw5G3B3gD2KcYcN5zZsVvK2Jc9Y2g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    /* ----- Global ----- */
    * { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; height: 100%; }
    body {
      font-family: 'Montserrat', sans-serif;
      background: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1600&q=80') no-repeat center center fixed;
      background-size: cover;
      color: #2e2e2e;
      position: relative;
    }
    /* Dark overlay to improve readability */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.45);
      pointer-events: none;
      z-index: 0;
    }

    /* ----- Container ----- */
    .container {
      position: relative;
      max-width: 800px;
      margin: 40px auto;
      background: rgba(255,255,255,0.93);
      border-radius: 10px;
      padding: 20px 30px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      z-index: 1;
    }

    /* ----- Header ----- */
    header h1 {
      font-family: 'Merriweather', serif;
      font-weight: 700;
      text-align: center;
      color: #2c5f2d;
      margin-bottom: 20px;
    }

    /* ----- Form sections ----- */
    section {
      margin-bottom: 20px;
    }
    #add-item-section,
    #save-section,
    #load-section,
    #clear-section {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      align-items: center;
    }
    input[type="text"],
    input[type="number"],
    select {
      flex: 1 1 150px;
      padding: 8px 10px;
      border: 1px solid #bbb;
      border-radius: 5px;
      font-size: 1rem;
    }
    button {
      flex: 0 0 auto;
      padding: 8px 14px;
      background: #2c5f2d;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 600;
      transition: background .2s;
    }
    button:hover { background: #1f4a20; }
    button.danger { background: #c0392b; }
    button.danger:hover { background: #a93226; }

    /* ----- Item list ----- */
    #item-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    #item-list li {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 6px;
      border-bottom: 1px solid #e0e0e0;
      gap: 8px;
      flex-wrap: wrap;
    }
    .packed-checkbox {
      transform: scale(1.2);
      cursor: pointer;
    }
    .item-name {
      flex: 1 1 120px;
      font-weight: 600;
      color: #333;
    }
    .item-weight {
      width: 90px;
      text-align: right;
      color: #555;
      font-size: .95rem;
    }
    .delete-btn {
      background: none;
      border: none;
      color: #c0392b;
      cursor: pointer;
      font-size: 1.1rem;
      padding: 2px;
    }
    .delete-btn:hover { color: #e74c3c; }

    /* ----- Weight summary ----- */
    #weight-section {
      text-align: center;
      font-size: 1.1rem;
      font-weight: 600;
      color: #2c5f2d;
    }
    #weight-section span { color: #000; }

    /* ----- Responsive ----- */
    @media (max-width: 560px) {
      .container { margin: 20px; padding: 15px; }
      button { width: 100%; }
      #add-item-section, #save-section, #load-section, #clear-section {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="overlay"></div>

  <div class="container">
    <header><h1>Camping Gear Checklist</h1></header>

    <!-- Add new gear -->
    <section id="add-item-section">
      <input type="text" id="item-name" placeholder="Item name">
      <input type="number" id="item-weight" placeholder="Weight (kg)" min="0" step="0.01">
      <button id="add-item-btn">Add Item</button>
    </section>

    <!-- List of gear -->
    <section id="list-section">
      <ul id="item-list"></ul>
    </section>

    <!-- Weight totals -->
    <section id="weight-section">
      <p>Total weight: <span id="total-weight">0.00</span> kg</p>
      <p>Packed weight: <span id="packed-weight">0.00</span> kg</p>
    </section>

    <!-- Save current list -->
    <section id="save-section">
      <input type="text" id="list-name" placeholder="Save list as...">
      <button id="save-list-btn">Save List</button>
    </section>

    <!-- Load / Delete saved lists -->
    <section id="load-section">
      <select id="saved-lists"></select>
      <button id="load-list-btn">Load</button>
      <button id="delete-list-btn" class="danger">Delete</button>
    </section>

    <!-- Clear all items -->
    <section id="clear-section">
      <button id="clear-list-btn" class="danger">Clear All Items</button>
    </section>
  </div>

  <script>
    /* ==== Camping Gear Checklist ==== */
    (function () {
      const STORAGE_KEY = 'campingGearLists';
      let items = []; // Current gear items

      /* --------- Local Storage helpers --------- */
      function getSavedLists() {
        const raw = localStorage.getItem(STORAGE_KEY);
        return raw ? JSON.parse(raw) : {};
      }
      function saveLists(lists) {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(lists));
      }

      /* --------- UI update helpers --------- */
      function updateSavedListsDropdown() {
        const savedLists = getSavedLists();
        const select = document.getElementById('saved-lists');
        select.innerHTML = '';
        const placeholder = document.createElement('option');
        placeholder.value = '';
        placeholder.textContent = '-- Select a saved list --';
        placeholder.disabled = true;
        placeholder.selected = true;
        select.appendChild(placeholder);
        Object.keys(savedLists).forEach(name => {
          const opt = document.createElement('option');
          opt.value = name;
          opt.textContent = name;
          select.appendChild(opt);
        });
      }

      function renderList() {
        const ul = document.getElementById('item-list');
        ul.innerHTML = '';
        items.forEach(item => {
          const li = document.createElement('li');
          li.dataset.id = item.id;

          // Packed checkbox
          const cb = document.createElement('input');
          cb.type = 'checkbox';
          cb.className = 'packed-checkbox';
          cb.checked = item.packed;
          li.appendChild(cb);

          // Name
          const nameSpan = document.createElement('span');
          nameSpan.className = 'item-name';
          nameSpan.textContent = item.name;
          li.appendChild(nameSpan);

          // Weight
          const weightSpan = document.createElement('span');
          weightSpan.className = 'item-weight';
          weightSpan.textContent = `${item.weight.toFixed(2)} kg`;
          li.appendChild(weightSpan);

          // Delete button
          const delBtn = document.createElement('button');
          delBtn.className = 'delete-btn';
          delBtn.title = 'Delete item';
          delBtn.innerHTML = '<i class="fas fa-trash"></i>';
          li.appendChild(delBtn);

          ul.appendChild(li);
        });
        updateWeights();
      }

      function updateWeights() {
        const total = items.reduce((sum, it) => sum + it.weight, 0);
        const packed = items.filter(it => it.packed).reduce((sum, it) => sum + it.weight, 0);
        document.getElementById('total-weight').textContent = total.toFixed(2);
        document.getElementById('packed-weight').textContent = packed.toFixed(2);
      }

      /* --------- Core functionality --------- */
      function addItem(name, weight) {
        const id = Date.now().toString() + Math.random().toString(36).substr(2, 5);
        items.push({ id, name, weight, packed: false });
        renderList();
      }

      function deleteItem(id) {
        items = items.filter(it => it.id !== id);
        renderList();
      }

      function togglePacked(id, packed) {
        const item = items.find(it => it.id === id);
        if (item) {
          item.packed = packed;
          updateWeights();
        }
      }

      function clearItems() {
        if (confirm('Delete all items? This cannot be undone.')) {
          items = [];
          renderList();
        }
      }

      function saveCurrentList(listName) {
        if (!listName) {
          alert('Please provide a name for the list.');
          return;
        }
        const saved = getSavedLists();
        if (saved[listName] && !confirm(`A list named "${listName}" already exists. Overwrite?`)) {
          return;
        }
        // Deep copy to avoid later mutation
        saved[listName] = items.map(it => ({ ...it }));
        saveLists(saved);
        updateSavedListsDropdown();
        alert(`List "${listName}" saved!`);
      }

      function loadList(listName) {
        const saved = getSavedLists();
        if (!saved[listName]) {
          alert(`List "${listName}" not found.`);
          return;
        }
        // Deep copy again for safety
        items = saved[listName].map(it => ({ ...it }));
        renderList();
      }

      function deleteSavedList(listName) {
        const saved = getSavedLists();
        if (!saved[listName]) {
          alert(`List "${listName}" not found.`);
          return;
        }
        if (!confirm(`Delete the saved list "${listName}"?`)) return;
        delete saved[listName];
        saveLists(saved);
        updateSavedListsDropdown();
        alert(`List "${listName}" deleted.`);
      }

      /* --------- Event listeners --------- */
      document.addEventListener('DOMContentLoaded', () => {
        const addBtn = document.getElementById('add-item-btn');
        const nameInput = document.getElementById('item-name');
        const weightInput = document.getElementById('item-weight');
        const saveBtn = document.getElementById('save-list-btn');
        const listNameInput = document.getElementById('list-name');
        const loadBtn = document.getElementById('load-list-btn');
        const deleteListBtn = document.getElementById('delete-list-btn');
        const savedSelect = document.getElementById('saved-lists');
        const clearBtn = document.getElementById('clear-list-btn');
        const itemList = document.getElementById('item-list');

        // ---- Add item ----
        addBtn.addEventListener('click', () => {
          const name = nameInput.value.trim();
          const weightStr = weightInput.value.trim();

          if (!name) {
            alert('Item name cannot be empty.');
            return;
          }
          const weight = parseFloat(weightStr);
          if (isNaN(weight) || weight < 0) {
            alert('Enter a valid non‑negative weight.');
            return;
          }
          addItem(name, weight);
          nameInput.value = '';
          weightInput.value = '';
        });
        // Allow Enter key on inputs
        [nameInput, weightInput].forEach(el => {
          el.addEventListener('keypress', e => {
            if (e.key === 'Enter') addBtn.click();
          });
        });

        // ---- List interaction (checkbox & delete) ----
        itemList.addEventListener('change', e => {
          if (e.target && e.target.matches('.packed-checkbox')) {
            const li = e.target.closest('li');
            togglePacked(li.dataset.id, e.target.checked);
          }
        });
        itemList.addEventListener('click', e => {
          const delBtn = e.target.closest('.delete-btn');
          if (delBtn) {
            const li = delBtn.closest('li');
            if (confirm('Delete this item?')) deleteItem(li.dataset.id);
          }
        });

        // ---- Save current list ----
        saveBtn.addEventListener('click', () => {
          const listName = listNameInput.value.trim();
          saveCurrentList(listName);
        });

        // ---- Load a saved list ----
        loadBtn.addEventListener('click', () => {
          const selected = savedSelect.value;
          if (!selected) {
            alert('Select a list to load.');
            return;
          }
          loadList(selected);
        });

        // ---- Delete a saved list ----
        deleteListBtn.addEventListener('click', () => {
          const selected = savedSelect.value;
          if (!selected) {
            alert('Select a list to delete.');
            return;
          }
          deleteSavedList(selected);
        });

        // ---- Clear all items ----
        clearBtn.addEventListener('click', clearItems);

        // Initial UI setup
        updateSavedListsDropdown();
        renderList();
      });
    })();
  </script>
</body>
</html>
