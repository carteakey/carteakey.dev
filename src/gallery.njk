---
layout: layouts/base.njk
title: Gallery
eleventyNavigation:
  key: Gallery
  order: 5
---

<div class="not-prose">
  <h1 class="text-3xl font-bold mb-6">Gallery</h1>
  
  <div class="mb-8 p-4 bg-gray-100 dark:bg-gray-800 rounded">
    <p class="text-sm">
      Collection of photographs I've taken in real and virtual lives. 
      Just a hobby - I enjoy capturing both moments that look ~aesthetic~.
    </p>
  </div>

  <div class="grid grid-cols-2 gap-4" id="gallery">
    {% set columns = 4 %}
    {% for i in range(0, columns) %}
    <div class="grid gap-4">
      {% for photo in photos %}
      {% if loop.index0 % columns == i %}
      <figure class="overflow-hidden rounded-lg shadow-lg cursor-pointer group hover:shadow-xl transition-shadow duration-300" 
              data-pswp-src="{{ photo.path }}"
              data-pswp-width="{{ photo.width }}"
              data-pswp-height="{{ photo.height }}"
              data-pswp-title="{{ photo.title }}"
              data-pswp-description="{% if photo.category == 'real' %}ðŸ“ {{ photo.location }}&#10;ðŸ“± {{ photo.device }}{% else %}ðŸŽ® {{ photo.game }}&#10;ðŸ’» {{ photo.platform }}{% endif %}&#10;ðŸ“… {{ photo.date }}">
        <img src="{{ photo.path }}" 
             alt="{{ photo.title }}"
             class="h-auto max-w-full rounded-lg transition-transform duration-300 group-hover:scale-105"
             loading="lazy">
      </figure>
      {% endif %}
      {% endfor %}
    </div>
    {% endfor %}
  </div>
</div>

<!-- PhotoSwipe -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@5.3.8/dist/photoswipe.css">
<script type="module">
import PhotoSwipeLightbox from 'https://cdn.jsdelivr.net/npm/photoswipe@5.3.8/dist/photoswipe-lightbox.esm.min.js'
import PhotoSwipe from 'https://cdn.jsdelivr.net/npm/photoswipe@5.3.8/dist/photoswipe.esm.min.js'

const lightbox = new PhotoSwipeLightbox({
  gallery: '#gallery',
  children: 'figure',
  pswpModule: PhotoSwipe,
  showHideAnimationType: 'fade',
  preloadFirstSlide: true,
  preload: [1,2]
})

// Configure caption with metadata
lightbox.on('itemData', (e) => {
  const { itemData } = e
  if (!itemData.src) {
    itemData.src = itemData.element.dataset.pswpSrc
  }
  itemData.title = itemData.element.dataset.pswpTitle
  itemData.description = itemData.element.dataset.pswpDescription.replace(/&#10;/g, '\n')
})

// Update UI elements
lightbox.on('uiRegister', function() {
  lightbox.pswp.ui.registerElement({
    name: 'custom-caption',
    order: 9,
    isButton: false,
    appendTo: 'root',
    html: 'Caption text',
    onInit: (el, pswp) => {
      lightbox.pswp.on('change', () => {
        const currSlideElement = lightbox.pswp.currSlide.data.element
        el.innerHTML = `
          <div class="pswp__custom-caption">
            <h3 class="text-lg font-semibold">${currSlideElement.dataset.pswpTitle}</h3>
            <div class="text-sm" style="white-space: pre-line">${currSlideElement.dataset.pswpDescription}</div>
          </div>
        `
      })
    }
  })
})

lightbox.init()
</script>

<!-- PhotoSwipe Template -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="pswp__bg"></div>
  <div class="pswp__scroll-wrap">
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    <div class="pswp__ui pswp__ui--hidden">
      <div class="pswp__top-bar">
        <div class="pswp__counter"></div>
        <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
        <button class="pswp__button pswp__button--share" title="Share"></button>
        <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
        <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
        <div class="pswp__preloader">
          <div class="pswp__preloader__icn">
            <div class="pswp__preloader__cut">
              <div class="pswp__preloader__donut"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
        <div class="pswp__share-tooltip"></div>
      </div>
      <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
      <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>
      <style>
.pswp__custom-caption {
  background: rgba(0, 0, 0, 0.75);
  color: #fff;
  padding: 1rem;
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
}
</style>
    </div>
  </div>
</div>
