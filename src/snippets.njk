---
layout: layouts/base.njk
title: Snippets
description: A collection of useful code snippets and quick tips
eleventyNavigation:
  key: Snippets
  order: 3
---

{% include "components/breadcrumbs.njk" %}

{% set totalSnippets = collections.snippets | length %}
{% set pageTitle = title %}
{% set pageDescription = "Bite-sized solutions, command references, and quick fixes I reach for regularly." %}
{% set pageIcon = "code" %}
{% set itemCount = totalSnippets %}
{% set itemLabel = "snippets" %}

<div class="max-w-5xl mx-auto" x-data="{ viewMode: 'grid' }">
  {% include "components/page-header.njk" %}

  <div class="mt-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
    <div class="relative flex-1 max-w-sm">
      {% feather "search", class="w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2" %}
      <input
        type="text"
        id="snippetSearch"
        placeholder="Filter snippets..."
        class="w-full rounded-full border border-gray-200 bg-gray-50 py-2 pl-9 pr-4 text-sm focus:border-amber-400 focus:outline-none focus:ring-2 focus:ring-amber-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-100"
      >
    </div>
    <div class="view-toggle">
      <button type="button" title="Grid view" :class="{ 'active': viewMode === 'grid' }" @click="viewMode = 'grid'">
        {% feather "grid", class="w-4 h-4" %}
      </button>
      <button type="button" title="List view" :class="{ 'active': viewMode === 'list' }" @click="viewMode = 'list'">
        {% feather "list", class="w-4 h-4" %}
      </button>
    </div>
  </div>

  <!-- Grid View -->
  <div x-show="viewMode === 'grid'" class="mt-6 grid gap-3 md:grid-cols-2 lg:grid-cols-3" id="snippetGrid">
    {%- for snippet in collections.snippets | reverse -%}
      {% set rawTags = snippet.data.tags | default([]) %}
      {% set filteredTags = rawTags | filterTagList %}
      {% set excerpt = snippet.templateContent | striptags | replace('\n', ' ') | truncate(80, true, 'â€¦') %}
      {% set searchExcerpt = snippet.templateContent | striptags | replace('\n', ' ') | truncate(160, true, '') | lower %}

      <article
        class="snippet-card card card-hover card-compact"
        data-snippet-card
        data-title="{{ snippet.data.title | lower }}"
        data-tags="{{ filteredTags | join(' ') | lower }}"
        data-language="{{ snippet.data.language | default('') | lower }}"
        data-body="{{ searchExcerpt }}"
      >
        <h2 class="text-base font-semibold text-gray-900 dark:text-white leading-snug">
          <a href="{{ snippet.url }}" class="link-accent">{{ snippet.data.title }}</a>
        </h2>
        <div class="mt-1 flex flex-wrap items-center gap-2 text-xs text-gray-500 dark:text-gray-400">
          <time datetime="{{ snippet.date | htmlDateString }}">{{ snippet.date | readableDate }}</time>
          {% if snippet.data.language %}
            <span class="tag">{{ snippet.data.language }}</span>
          {% endif %}
        </div>
        {% if excerpt %}
          <p class="mt-2 text-sm text-gray-600 dark:text-gray-300 line-clamp-2">{{ excerpt }}</p>
        {% endif %}
        {% if filteredTags | length %}
          <div class="mt-2 flex flex-wrap gap-1">
            {% for tag in filteredTags | head(3) %}
              <a href="/snippets/tags/{{ tag | slugify }}/" class="tag tag-interactive text-[0.65rem]">#{{ tag }}</a>
            {% endfor %}
            {% if filteredTags | length > 3 %}
              <span class="tag text-[0.65rem]">+{{ filteredTags | length - 3 }}</span>
            {% endif %}
          </div>
        {% endif %}
      </article>
    {%- endfor -%}
  </div>

  <!-- List View -->
  <div x-show="viewMode === 'list'" x-cloak class="mt-6 space-y-2">
    {%- for snippet in collections.snippets | reverse -%}
      {% set rawTags = snippet.data.tags | default([]) %}
      {% set filteredTags = rawTags | filterTagList %}
      {% set searchExcerpt = snippet.templateContent | striptags | replace('\n', ' ') | truncate(160, true, '') | lower %}

      <article
        class="snippet-card card card-hover card-list"
        data-snippet-card
        data-title="{{ snippet.data.title | lower }}"
        data-tags="{{ filteredTags | join(' ') | lower }}"
        data-language="{{ snippet.data.language | default('') | lower }}"
        data-body="{{ searchExcerpt }}"
      >
        <div class="card-list-content">
          <a href="{{ snippet.url }}" class="card-list-title link-accent text-sm">{{ snippet.data.title }}</a>
        </div>
        {% if snippet.data.language %}
          <span class="tag hidden sm:inline-flex">{{ snippet.data.language }}</span>
        {% endif %}
        <time class="card-list-meta whitespace-nowrap" datetime="{{ snippet.date | htmlDateString }}">{{ snippet.date | readableDate }}</time>
        <a href="{{ snippet.url }}" class="text-gray-400 hover:text-amber-500">
          {% feather "arrow-right", class="w-4 h-4" %}
        </a>
      </article>
    {%- endfor -%}
  </div>
</div>

<style>
  [x-cloak] { display: none !important; }
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>

<script>
  const searchInput = document.getElementById('snippetSearch');
  const snippetCards = Array.from(document.querySelectorAll('[data-snippet-card]'));

  searchInput.addEventListener('input', (event) => {
    const term = event.target.value.trim().toLowerCase();

    snippetCards.forEach((card) => {
      const title = card.dataset.title || '';
      const tags = card.dataset.tags || '';
      const language = card.dataset.language || '';
      const body = card.dataset.body || '';
      const matches =
        term.length === 0 ||
        title.includes(term) ||
        tags.includes(term) ||
        language.includes(term) ||
        body.includes(term);

      card.classList.toggle('hidden', !matches);
    });
  });
</script>
