---
layout: layouts/base.njk
title: Site Statistics
description: Numbers and insights about this website
eleventyNavigation:
  key: Stats
  order: 9
permalink: /stats/
---

{% include "components/breadcrumbs.njk" %}

{% set totalPosts = collections.posts.length %}
{% set totalSnippets = collections.snippets.length %}
{% set totalTags = collections.tagList.length %}
{% set totalSnippetTags = collections.snippetTags.length %}
{% set totalPages = collections.all.length %}

{% set currentYear = "now" | date("Y") %}
{% set currentMonth = "now" | date("n") %}

{% set postsThisYear = 0 %}
{% set postsThisMonth = 0 %}
{% for post in collections.posts %}
  {% set postYear = post.date | date("Y") %}
  {% set postMonth = post.date | date("n") %}
  {% if postYear == currentYear %}
    {% set postsThisYear = postsThisYear + 1 %}
    {% if postMonth == currentMonth %}
      {% set postsThisMonth = postsThisMonth + 1 %}
    {% endif %}
  {% endif %}
{% endfor %}

<h1>Site Statistics</h1>

<p class="text-gray-600 dark:text-gray-400">
  A data-driven look at this website. Numbers updated every time the site builds.
</p>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 my-8 not-prose">
  <!-- Posts Stats -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-2xl font-bold text-gray-900 dark:text-white">{{ totalPosts }}</p>
        <p class="text-sm text-gray-600 dark:text-gray-400">Total Posts</p>
      </div>
      <div class="p-3 bg-blue-100 dark:bg-blue-900 rounded-full">
        {% feather "edit-3", class="w-6 h-6 text-blue-600 dark:text-blue-400" %}
      </div>
    </div>
    <div class="mt-4 flex items-center text-sm text-gray-600 dark:text-gray-400">
      <span class="text-green-600 dark:text-green-400 font-medium">{{ postsThisYear }}</span>
      <span class="ml-1">this year</span>
      <span class="mx-2">•</span>
      <span class="text-amber-600 dark:text-amber-400 font-medium">{{ postsThisMonth }}</span>
      <span class="ml-1">this month</span>
    </div>
  </div>

  <!-- Snippets Stats -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-2xl font-bold text-gray-900 dark:text-white">{{ totalSnippets }}</p>
        <p class="text-sm text-gray-600 dark:text-gray-400">Code Snippets</p>
      </div>
      <div class="p-3 bg-purple-100 dark:bg-purple-900 rounded-full">
        {% feather "code", class="w-6 h-6 text-purple-600 dark:text-purple-400" %}
      </div>
    </div>
    <div class="mt-4 flex items-center text-sm text-gray-600 dark:text-gray-400">
      <span class="text-indigo-600 dark:text-indigo-400 font-medium">{{ collections.snippets | map('data.language') | uniq | length }}</span>
      <span class="ml-1">languages</span>
    </div>
  </div>

  <!-- Tags Stats -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-2xl font-bold text-gray-900 dark:text-white">{{ totalTags }}</p>
        <p class="text-sm text-gray-600 dark:text-gray-400">Post Tags</p>
      </div>
      <div class="p-3 bg-amber-100 dark:bg-amber-900 rounded-full">
        {% feather "tag", class="w-6 h-6 text-amber-600 dark:text-amber-400" %}
      </div>
    </div>
    <div class="mt-4 flex items-center text-sm text-gray-600 dark:text-gray-400">
      <span class="text-rose-600 dark:text-rose-400 font-medium">{{ totalSnippetTags }}</span>
      <span class="ml-1">snippet tags</span>
      <span class="mx-2">•</span>
      <span class="text-teal-600 dark:text-teal-400 font-medium">{{ totalTags + totalSnippetTags }}</span>
      <span class="ml-1">total unique</span>
    </div>
  </div>

  <!-- Site Pages -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-2xl font-bold text-gray-900 dark:text-white">{{ totalPages }}</p>
        <p class="text-sm text-gray-600 dark:text-gray-400">Total Pages</p>
      </div>
      <div class="p-3 bg-emerald-100 dark:bg-emerald-900 rounded-full">
        {% feather "file-text", class="w-6 h-6 text-emerald-600 dark:text-emerald-400" %}
      </div>
    </div>
    <div class="mt-4 flex items-center text-sm text-gray-600 dark:text-gray-400">
      <span class="text-emerald-600 dark:text-emerald-400 font-medium">{{ page.date | date('YYYY') }}</span>
      <span class="ml-1">current year</span>
    </div>
  </div>

  <!-- Blog Activity -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
    <div class="flex items-center justify-between">
      <div>
        {% set latestPost = collections.posts | last %}
        {% set nowDate = "now" | date("X") %}
        {% set latestPostDate = latestPost.date | date("X") %}
        {% set daysSincePost = ((nowDate - latestPostDate) / (60 * 60 * 24)) | round %}
        <p class="text-2xl font-bold text-gray-900 dark:text-white">{{ daysSincePost }}</p>
        <p class="text-sm text-gray-600 dark:text-gray-400">Days Since Last Post</p>
      </div>
      <div class="p-3 bg-cyan-100 dark:bg-cyan-900 rounded-full">
        {% feather "clock", class="w-6 h-6 text-cyan-600 dark:text-cyan-400" %}
      </div>
    </div>
    <div class="mt-4 flex items-center text-sm text-gray-600 dark:text-gray-400">
      <span class="text-cyan-600 dark:text-cyan-400 font-medium">{{ latestPost.data.title | truncate(20) }}</span>
      <span class="ml-1">latest</span>
    </div>
  </div>

  <!-- Total Words -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
    <div class="flex items-center justify-between">
      <div>
        {# Estimate ~800 words per post on average #}
        {% set estimatedWords = collections.posts.length * 800 %}
        <p class="text-2xl font-bold text-gray-900 dark:text-white">{{ (estimatedWords / 1000) | round }}k+</p>
        <p class="text-sm text-gray-600 dark:text-gray-400">Words Written</p>
      </div>
      <div class="p-3 bg-violet-100 dark:bg-violet-900 rounded-full">
        {% feather "book-open", class="w-6 h-6 text-violet-600 dark:text-violet-400" %}
      </div>
    </div>
    <div class="mt-4 flex items-center text-sm text-gray-600 dark:text-gray-400">
      <span class="text-violet-600 dark:text-violet-400 font-medium">~800</span>
      <span class="ml-1">avg per post</span>
    </div>
  </div>

  <!-- Total Visitors -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-2xl font-bold text-gray-900 dark:text-white">{{ visitors.total | default(0) }}</p>
        <p class="text-sm text-gray-600 dark:text-gray-400">Total Visitors</p>
      </div>
      <div class="p-3 bg-sky-100 dark:bg-sky-900 rounded-full">
        {% feather "eye", class="w-6 h-6 text-sky-600 dark:text-sky-400" %}
      </div>
    </div>
    <div class="mt-4 flex items-center text-sm text-gray-600 dark:text-gray-400">
      <span class="text-sky-600 dark:text-sky-400 font-medium">tracked</span>
      <span class="ml-1">via Redis</span>
    </div>
  </div>

  <!-- Total Upvotes -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
    <div class="flex items-center justify-between">
      <div>
        {% set totalUpvotes = 0 %}
        {% for slug, count in upvotes.posts %}
          {% set totalUpvotes = totalUpvotes + count %}
        {% endfor %}
        <p class="text-2xl font-bold text-gray-900 dark:text-white">{{ totalUpvotes }}</p>
        <p class="text-sm text-gray-600 dark:text-gray-400">Total Upvotes</p>
      </div>
      <div class="p-3 bg-pink-100 dark:bg-pink-900 rounded-full">
        {% feather "heart", class="w-6 h-6 text-pink-600 dark:text-pink-400" %}
      </div>
    </div>
    <div class="mt-4 flex items-center text-sm text-gray-600 dark:text-gray-400">
      <span class="text-pink-600 dark:text-pink-400 font-medium">{{ upvotes.posts | keys | length }}</span>
      <span class="ml-1">posts with upvotes</span>
    </div>
  </div>

  <!-- Build Info -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-2xl font-bold text-gray-900 dark:text-white">{{ page.date | date('MMM d') }}</p>
        <p class="text-sm text-gray-600 dark:text-gray-400">Last Build</p>
      </div>
      <div class="p-3 bg-red-100 dark:bg-red-900 rounded-full">
        {% feather "calendar", class="w-6 h-6 text-red-600 dark:text-red-400" %}
      </div>
    </div>
    <div class="mt-4 flex items-center text-sm text-gray-600 dark:text-gray-400">
      <span class="text-red-600 dark:text-red-400 font-medium">{{ page.date | date('h:mm a') }}</span>
      <span class="ml-1">today</span>
    </div>
  </div>
</div>

<!-- Lighthouse Performance -->
<div class="my-12">
  <div class="flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
    <div>
      <h2>Lighthouse Performance</h2>
      <p class="text-gray-600 dark:text-gray-400">Core Web Vitals and performance metrics pulled from the latest run.</p>
    </div>
    <div class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">
      Latest run {{ lighthouse.updatedAt }} • {{ lighthouse.source }}
    </div>
  </div>

  {% set lighthouseCards = [
    {
      key: 'performance',
      label: 'Performance',
      icon: 'zap',
      gradient: 'from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20',
      border: 'border-green-200 dark:border-green-800',
      iconColor: 'text-green-600 dark:text-green-400',
      textColor: 'text-green-600 dark:text-green-400',
      barColor: 'bg-green-500 dark:bg-green-400',
      trackColor: 'bg-green-200 dark:bg-green-800'
    },
    {
      key: 'accessibility',
      label: 'Accessibility',
      icon: 'users',
      gradient: 'from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20',
      border: 'border-blue-200 dark:border-blue-800',
      iconColor: 'text-blue-600 dark:text-blue-400',
      textColor: 'text-blue-600 dark:text-blue-400',
      barColor: 'bg-blue-500 dark:bg-blue-400',
      trackColor: 'bg-blue-200 dark:bg-blue-800'
    },
    {
      key: 'bestPractices',
      label: 'Best Practices',
      icon: 'shield',
      gradient: 'from-purple-50 to-violet-50 dark:from-purple-900/20 dark:to-violet-900/20',
      border: 'border-purple-200 dark:border-purple-800',
      iconColor: 'text-purple-600 dark:text-purple-400',
      textColor: 'text-purple-600 dark:text-purple-400',
      barColor: 'bg-purple-500 dark:bg-purple-400',
      trackColor: 'bg-purple-200 dark:bg-purple-800'
    },
    {
      key: 'seo',
      label: 'SEO',
      icon: 'search',
      gradient: 'from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20',
      border: 'border-amber-200 dark:border-amber-800',
      iconColor: 'text-amber-600 dark:text-amber-400',
      textColor: 'text-amber-600 dark:text-amber-400',
      barColor: 'bg-amber-500 dark:bg-amber-400',
      trackColor: 'bg-amber-200 dark:bg-amber-800'
    }
  ] %}

  <div class="mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 not-prose">
    {% for card in lighthouseCards %}
      {% set score = lighthouse.metrics[card.key] or 0 %}
      <div class="bg-gradient-to-br {{ card.gradient }} p-6 rounded-lg border-2 {{ card.border }}">
        <div class="flex items-center justify-between mb-3">
          <span class="text-sm font-medium {{ card.textColor }}">{{ card.label }}</span>
          {% feather card.icon, class='w-5 h-5 ' ~ card.iconColor %}
        </div>
        <div class="flex items-baseline gap-2">
          <span class="text-4xl font-bold {{ card.textColor }}">{{ score }}</span>
          <span class="text-lg text-gray-500 dark:text-gray-400">/100</span>
        </div>
        <div class="mt-3 h-2 {{ card.trackColor }} rounded-full overflow-hidden" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="{{ score }}">
          <div class="h-full {{ card.barColor }}" style="width: {{ score }}%"></div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>
<!-- Popular Tags -->
<div class="my-12">
  <h2>Popular Tags</h2>
  <p class="text-gray-600 dark:text-gray-400 mb-6">Most frequently used tags across posts</p>
  
  <div class="flex flex-wrap gap-2">
    {% for tag in collections.tagList | head(20) %}
      {% set tagCount = collections[tag].length %}
      {% set tagUrl %}/tags/{{ tag | slugify }}/{% endset %}
      <a 
        href="{{ tagUrl | url }}" 
        class="inline-flex items-center px-3 py-1 rounded-full text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"
      >
        {{ tag }}
        <span class="ml-1 text-xs opacity-60">{{ tagCount }}</span>
      </a>
    {% endfor %}
  </div>
</div>

<!-- Meta Information -->
<div class="my-12 p-6 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700">
  <h3 class="text-lg font-semibold mb-4">Technical Details</h3>
  <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-6 gap-y-4 text-sm">
    <div>
      <p class="text-gray-500 dark:text-gray-500 text-xs uppercase tracking-wide mb-1">Generator</p>
      <p class="font-medium text-gray-900 dark:text-white">{{ eleventy.generator }}</p>
    </div>
    <div>
      <p class="text-gray-500 dark:text-gray-500 text-xs uppercase tracking-wide mb-1">Build Source</p>
      <p class="font-medium text-gray-900 dark:text-white">{{ eleventy.env.source }}</p>
    </div>
    <div>
      <p class="text-gray-500 dark:text-gray-500 text-xs uppercase tracking-wide mb-1">Last Build</p>
      <p class="font-medium text-gray-900 dark:text-white">{{ page.date | readableDate }}</p>
    </div>
    <div>
      <p class="text-gray-500 dark:text-gray-500 text-xs uppercase tracking-wide mb-1">Build Time</p>
      <p class="font-medium text-gray-900 dark:text-white">{{ page.date | date('h:mm a') }}</p>
    </div>
    <div>
      <p class="text-gray-500 dark:text-gray-500 text-xs uppercase tracking-wide mb-1">Total Collections</p>
      <p class="font-medium text-gray-900 dark:text-white">{{ collections | keys | length }}</p>
    </div>
    <div>
      <p class="text-gray-500 dark:text-gray-500 text-xs uppercase tracking-wide mb-1">CSS Framework</p>
      <p class="font-medium text-gray-900 dark:text-white">Tailwind CSS v4</p>
    </div>
    <div>
      <p class="text-gray-500 dark:text-gray-500 text-xs uppercase tracking-wide mb-1">JS Framework</p>
      <p class="font-medium text-gray-900 dark:text-white">Alpine.js</p>
    </div>
    <div>
      <p class="text-gray-500 dark:text-gray-500 text-xs uppercase tracking-wide mb-1">Hosting</p>
      <p class="font-medium text-gray-900 dark:text-white">Netlify</p>
    </div>
    <div>
      <p class="text-gray-500 dark:text-gray-500 text-xs uppercase tracking-wide mb-1">Template Engine</p>
      <p class="font-medium text-gray-900 dark:text-white">Nunjucks</p>
    </div>
    <div>
      <p class="text-gray-500 dark:text-gray-500 text-xs uppercase tracking-wide mb-1">Syntax Highlighting</p>
      <p class="font-medium text-gray-900 dark:text-white">PrismJS</p>
    </div>
    <div>
      <p class="text-gray-500 dark:text-gray-500 text-xs uppercase tracking-wide mb-1">Comments</p>
      <p class="font-medium text-gray-900 dark:text-white">Giscus (GitHub)</p>
    </div>
    <div>
      <p class="text-gray-500 dark:text-gray-500 text-xs uppercase tracking-wide mb-1">Analytics</p>
      <p class="font-medium text-gray-900 dark:text-white">Upstash Redis</p>
    </div>
  </div>
</div>

<div class="text-center text-sm text-gray-600 dark:text-gray-400">
  <p>Statistics automatically calculated on each build. Data includes all published content.</p>
</div>
