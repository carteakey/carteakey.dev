---
layout: layouts/base.njk
title: Site Statistics
description: Numbers and insights about this website
eleventyNavigation:
  key: Stats
  order: 9
permalink: /stats/
---

{% set totalPosts = collections.posts.length %}
{% set totalSnippets = collections.snippets.length %}
{% set totalTags = collections.tagList.length %}
{% set totalSnippetTags = collections.snippetTags.length %}
{% set totalPages = collections.all.length %}

{% set currentYear = "now" | date("Y") %}
{% set currentMonth = "now" | date("n") %}

{% set postsThisYear = 0 %}
{% set postsThisMonth = 0 %}
{% for post in collections.posts %}
  {% set postYear = post.date | date("Y") %}
  {% set postMonth = post.date | date("n") %}
  {% if postYear == currentYear %}
    {% set postsThisYear = postsThisYear + 1 %}
    {% if postMonth == currentMonth %}
      {% set postsThisMonth = postsThisMonth + 1 %}
    {% endif %}
  {% endif %}
{% endfor %}

<h1>Site Statistics</h1>

<p class="text-gray-600 dark:text-gray-400">
  A data-driven look at this website. Numbers updated every time the site builds.
</p>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 my-8 not-prose">
  <!-- Posts Stats -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-2xl font-bold text-gray-900 dark:text-white">{{ totalPosts }}</p>
        <p class="text-sm text-gray-600 dark:text-gray-400">Total Posts</p>
      </div>
      <div class="p-3 bg-blue-100 dark:bg-blue-900 rounded-full">
        {% feather "edit-3", class="w-6 h-6 text-blue-600 dark:text-blue-400" %}
      </div>
    </div>
    <div class="mt-4 flex items-center text-sm text-gray-600 dark:text-gray-400">
      <span class="text-green-600 dark:text-green-400 font-medium">{{ postsThisYear }}</span>
      <span class="ml-1">this year</span>
      <span class="mx-2">•</span>
      <span class="text-amber-600 dark:text-amber-400 font-medium">{{ postsThisMonth }}</span>
      <span class="ml-1">this month</span>
    </div>
  </div>

  <!-- Snippets Stats -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-2xl font-bold text-gray-900 dark:text-white">{{ totalSnippets }}</p>
        <p class="text-sm text-gray-600 dark:text-gray-400">Code Snippets</p>
      </div>
      <div class="p-3 bg-purple-100 dark:bg-purple-900 rounded-full">
        {% feather "code", class="w-6 h-6 text-purple-600 dark:text-purple-400" %}
      </div>
    </div>
    <div class="mt-4 flex items-center text-sm text-gray-600 dark:text-gray-400">
      <span class="text-indigo-600 dark:text-indigo-400 font-medium">{{ collections.snippets | map('data.language') | uniq | length }}</span>
      <span class="ml-1">languages</span>
    </div>
  </div>

  <!-- Tags Stats -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-2xl font-bold text-gray-900 dark:text-white">{{ totalTags }}</p>
        <p class="text-sm text-gray-600 dark:text-gray-400">Post Tags</p>
      </div>
      <div class="p-3 bg-amber-100 dark:bg-amber-900 rounded-full">
        {% feather "tag", class="w-6 h-6 text-amber-600 dark:text-amber-400" %}
      </div>
    </div>
    <div class="mt-4 flex items-center text-sm text-gray-600 dark:text-gray-400">
      <span class="text-rose-600 dark:text-rose-400 font-medium">{{ totalSnippetTags }}</span>
      <span class="ml-1">snippet tags</span>
      <span class="mx-2">•</span>
      <span class="text-teal-600 dark:text-teal-400 font-medium">{{ totalTags + totalSnippetTags }}</span>
      <span class="ml-1">total unique</span>
    </div>
  </div>

  <!-- Site Pages -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-2xl font-bold text-gray-900 dark:text-white">{{ totalPages }}</p>
        <p class="text-sm text-gray-600 dark:text-gray-400">Total Pages</p>
      </div>
      <div class="p-3 bg-emerald-100 dark:bg-emerald-900 rounded-full">
        {% feather "file-text", class="w-6 h-6 text-emerald-600 dark:text-emerald-400" %}
      </div>
    </div>
    <div class="mt-4 flex items-center text-sm text-gray-600 dark:text-gray-400">
      <span class="text-emerald-600 dark:text-emerald-400 font-medium">{{ page.date | date('YYYY') }}</span>
      <span class="ml-1">current year</span>
    </div>
  </div>

  <!-- Last Updated -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-2xl font-bold text-gray-900 dark:text-white">{{ page.date | date('MMM d') }}</p>
        <p class="text-sm text-gray-600 dark:text-gray-400">Last Build</p>
      </div>
      <div class="p-3 bg-red-100 dark:bg-red-900 rounded-full">
        {% feather "calendar", class="w-6 h-6 text-red-600 dark:text-red-400" %}
      </div>
    </div>
    <div class="mt-4 flex items-center text-sm text-gray-600 dark:text-gray-400">
      <span class="text-red-600 dark:text-red-400 font-medium">{{ page.date | date('h:mm a') }}</span>
      <span class="ml-1">today</span>
    </div>
  </div>

  <!-- Blog Activity -->
  <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
    <div class="flex items-center justify-between">
      <div>
        {% set latestPost = collections.posts | first %}
        {% set daysSincePost = ((page.date - latestPost.date) / (1000 * 60 * 60 * 24)) | round %}
        <p class="text-2xl font-bold text-gray-900 dark:text-white">{{ daysSincePost }}</p>
        <p class="text-sm text-gray-600 dark:text-gray-400">Days Since Last Post</p>
      </div>
      <div class="p-3 bg-cyan-100 dark:bg-cyan-900 rounded-full">
        {% feather "clock", class="w-6 h-6 text-cyan-600 dark:text-cyan-400" %}
      </div>
    </div>
    <div class="mt-4 flex items-center text-sm text-gray-600 dark:text-gray-400">
      <span class="text-cyan-600 dark:text-cyan-400 font-medium">{{ latestPost.data.title | truncate(20) }}</span>
      <span class="ml-1">latest</span>
    </div>
  </div>
</div>

<!-- Popular Tags -->
<div class="my-12">
  <h2>Popular Tags</h2>
  <p class="text-gray-600 dark:text-gray-400 mb-6">Most frequently used tags across posts</p>
  
  <div class="flex flex-wrap gap-2">
    {% for tag in collections.tagList | head(20) %}
      {% set tagCount = collections[tag].length %}
      {% set tagUrl %}/tags/{{ tag | slugify }}/{% endset %}
      <a 
        href="{{ tagUrl | url }}" 
        class="inline-flex items-center px-3 py-1 rounded-full text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"
      >
        {{ tag }}
        <span class="ml-1 text-xs opacity-60">{{ tagCount }}</span>
      </a>
    {% endfor %}
  </div>
</div>

<!-- Recent Posts Activity -->
<div class="my-12">
  <h2>Recent Activity</h2>
  <p class="text-gray-600 dark:text-gray-400 mb-6">Latest posts published</p>
  
  <div class="space-y-3">
    {% for post in collections.posts | head(5) %}
      <div class="flex items-center justify-between p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700">
        <div class="flex-1">
          <h3 class="font-medium text-gray-900 dark:text-white">
            <a href="{{ post.url }}" class="hover:text-blue-600 dark:hover:text-blue-400">{{ post.data.title }}</a>
          </h3>
          <p class="text-sm text-gray-600 dark:text-gray-400">{{ post.data.description | truncate(80) }}</p>
        </div>
        <div class="text-right text-sm text-gray-500 dark:text-gray-400">
          <p>{{ post.date | readableDate }}</p>
          {% if post.data.tags %}
            <div class="flex flex-wrap gap-1 mt-1 justify-end">
              {% for tag in post.data.tags | filterTagList | head(2) %}
                <span class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs">{{ tag }}</span>
              {% endfor %}
            </div>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<!-- Collection Overview -->
<div class="my-12">
  <h2>Content Overview</h2>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Posts by Tag -->
    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
      <h3 class="font-semibold mb-4 flex items-center">
        {% feather "edit-3", class="w-5 h-5 mr-2" %}
        Posts by Category
      </h3>
      <div class="space-y-2">
        {% for tag in collections.tagList | head(8) %}
          {% set tagCount = collections[tag].length %}
          {% set percentage = (tagCount * 100 / totalPosts) | round %}
          <div class="flex items-center justify-between">
            <span class="text-sm font-medium">{{ tag }}</span>
            <div class="flex items-center">
              <div class="w-20 h-2 bg-gray-200 dark:bg-gray-700 rounded-full mr-2">
                <div class="h-2 bg-blue-500 rounded-full" style="width: {{ percentage }}%"></div>
              </div>
              <span class="text-xs text-gray-600 dark:text-gray-400 w-8 text-right">{{ tagCount }}</span>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>

    <!-- Snippets by Language -->
    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700">
      <h3 class="font-semibold mb-4 flex items-center">
        {% feather "code", class="w-5 h-5 mr-2" %}
        Snippets by Language
      </h3>
      <div class="space-y-2">
        {% set snippetLanguages = {} %}
        {% for snippet in collections.snippets %}
          {% if snippet.data.language %}
            {% set lang = snippet.data.language %}
            {% set snippetLanguages = snippetLanguages | setAttribute(lang, (snippetLanguages[lang] or 0) + 1) %}
          {% endif %}
        {% endfor %}
        
        {% for lang, count in snippetLanguages | dictsort(false, 'value') | reverse | head(6) %}
          {% set percentage = (count * 100 / totalSnippets) | round %}
          <div class="flex items-center justify-between">
            <span class="text-sm font-medium">{{ lang }}</span>
            <div class="flex items-center">
              <div class="w-20 h-2 bg-gray-200 dark:bg-gray-700 rounded-full mr-2">
                <div class="h-2 bg-purple-500 rounded-full" style="width: {{ percentage }}%"></div>
              </div>
              <span class="text-xs text-gray-600 dark:text-gray-400 w-8 text-right">{{ count }}</span>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

<!-- Meta Information -->
<div class="my-12 p-6 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700">
  <h3 class="text-lg font-semibold mb-4">Meta Information</h3>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
    <div>
      <p class="text-gray-600 dark:text-gray-400">Site Generator</p>
      <p class="font-medium">{{ eleventy.generator }}</p>
    </div>
    <div>
      <p class="text-gray-600 dark:text-gray-400">Build Environment</p>
      <p class="font-medium">{{ eleventy.env.source }}</p>
    </div>
    <div>
      <p class="text-gray-600 dark:text-gray-400">Last Build</p>
      <p class="font-medium">{{ page.date | readableDate }}</p>
    </div>
    <div>
      <p class="text-gray-600 dark:text-gray-400">Total Collections</p>
      <p class="font-medium">{{ collections | keys | length }} collections</p>
    </div>
  </div>
</div>

<div class="text-center text-sm text-gray-600 dark:text-gray-400">
  <p>Statistics automatically calculated on each build. Data includes all published content.</p>
</div>
